# ü™ü Windows Docker Desktop Setup Guide

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Master Bot –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ Windows

### üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Windows 10/11 Pro/Enterprise
- Docker Desktop 4.0+
- WSL 2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –í–∫–ª—é—á–∏—Ç—å TCP –≤ Docker Desktop

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Docker Desktop**
2. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ ‚öôÔ∏è **Settings** (—à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **General**
4. –ù–∞–π–¥–∏—Ç–µ –∏ **–≤–∫–ª—é—á–∏—Ç–µ**:
   ```
   ‚úÖ Expose daemon on tcp://localhost:2375 without TLS
   ```
5. –ù–∞–∂–º–∏—Ç–µ **Apply & Restart**
6. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ Docker Desktop

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ë–µ–∑ —ç—Ç–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Master Bot –Ω–µ —Å–º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –±–æ—Ç–æ–≤!

---

### –®–∞–≥ 2: –°–∫–∞—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
cd C:\bot_project\b_m_s\new12_02
git pull origin main
```

**–ù–æ–≤—ã–π —Ñ–∞–π–ª:** `docker-compose.override.yml` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è.

---

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Master Bot

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ —Å –Ω–æ–≤—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
docker-compose build --no-cache bot-master

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë –∑–∞–Ω–æ–≤–æ
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs booking-bot-master -f
```

---

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Docker

```bash
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –≤–µ—Ä—Å–∏—é Docker API
docker exec -it booking-bot-master python -c "import docker; client=docker.from_env(); print('‚úÖ Docker –ø–æ–¥–∫–ª—é—á–µ–Ω!'); print(client.version())"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
‚úÖ Docker –ø–æ–¥–∫–ª—é—á–µ–Ω!
{'Platform': {'Name': ''}, 'Components': [...], 'Version': '27.4.1', ...}
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–æ–¥—É–ª—å docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

```bash
docker exec -it booking-bot-master pip list | findstr docker
```

**–î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:**
```
docker                    7.1.0
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DOCKER_HOST

```bash
docker exec -it booking-bot-master env | findstr DOCKER_HOST
```

**–î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:**
```
DOCKER_HOST=tcp://host.docker.internal:2375
```

### –¢–µ—Å—Ç 3: –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ Master Bot

```bash
docker exec -it booking-bot-master python -c "import docker; client=docker.from_env(); print([c.name for c in client.containers.list()])"
```

**–î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**
```python
['booking-bot-master', 'booking-bot-sales', 'booking-postgres', 'booking-redis']
```

---

## üîç Troubleshooting

### –û—à–∏–±–∫–∞: "Error while fetching server API version"

**–ü—Ä–∏—á–∏–Ω–∞:** Docker Desktop TCP –Ω–µ –≤–∫–ª—é—á—ë–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ Docker Desktop ‚Üí Settings ‚Üí General –≤–∫–ª—é—á–µ–Ω–æ:
   - ‚úÖ "Expose daemon on tcp://localhost:2375 without TLS"
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop –ø–æ–ª–Ω–æ—Å—Ç—å—é (Quit ‚Üí Start)
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
   ```bash
   docker-compose restart bot-master
   ```

---

### –û—à–∏–±–∫–∞: "Connection refused" –Ω–∞ –ø–æ—Ä—Ç—É 2375

**–ü—Ä–∏—á–∏–Ω–∞:** Docker Desktop –Ω–µ —Å–ª—É—à–∞–µ—Ç –Ω–∞ TCP –ø–æ—Ä—Ç—É.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Docker —Å–ª—É—à–∞–µ—Ç –Ω–∞ 2375
netstat -an | findstr 2375

# –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop
```

---

### –û—à–∏–±–∫–∞: git pull –≤—ã–¥–∞—ë—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git stash

# –°–∫–∞—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
git pull origin main

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git stash pop
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

TCP –±–µ–∑ TLS (–ø–æ—Ä—Ç 2375) **–Ω–µ–±–µ–∑–æ–ø–∞—Å–µ–Ω** –¥–ª—è production!

**–ü–æ—á–µ–º—É:**
- –õ—é–±–æ–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –≤–∞—à–µ–π –º–∞—à–∏–Ω–µ –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å Docker
- –ù–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ù–µ—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ‚úÖ OK  
**–î–ª—è production:** ‚ùå –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Linux —Å Unix socket

### Production —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–î–ª—è production —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Linux:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Unix socket (`/var/run/docker.sock`)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ TLS –¥–ª—è Docker API
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker Swarm –∏–ª–∏ Kubernetes
4. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Docker socket —á–µ—Ä–µ–∑ –≥—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üìä –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–µ–ø–ª–æ–π** - —Å–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ Master Bot
2. **–ò–∑—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** - [DOCKER_DEPLOYMENT_GUIDE.md](DOCKER_DEPLOYMENT_GUIDE.md)
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Sales Bot** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Master Bot API

---

## üÜò –ü–æ–º–æ—â—å

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Master Bot:
   ```bash
   docker logs booking-bot-master --tail 50
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã:
   ```bash
   docker-compose ps
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   docker exec -it booking-bot-master env
   ```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å Master Bot –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –±–æ—Ç–æ–≤ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ –Ω–∞ Windows! üéâ

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sales Bot](MASTER_BOT_GUIDE.md)
