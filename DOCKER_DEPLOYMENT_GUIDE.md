# ğŸš€ Docker-Based Autonomous Bot Deployment

## ğŸ¯ ĞĞ±Ğ·Ğ¾Ñ€

**Master Bot Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¸Ñ… Ğ±Ğ¾Ñ‚Ğ¾Ğ² ÑĞ°Ğ¼Ğ¾ÑÑ‚Ğ¾ÑÑ‚ĞµĞ»ÑŒĞ½Ğ¾!**

Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑ Docker Python SDK, Master Bot ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¶Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¼ Ñ†Ğ¸ĞºĞ»Ğ¾Ğ¼ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¸Ñ… Ğ±Ğ¾Ñ‚Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· Docker Socket.

---

## ğŸ›ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                    CONTROL PLANE                            â”ƒ
â”ƒ  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“   â”ƒ
â”ƒ  â”ƒ  Master Bot (Docker Container)                          â”ƒ   â”ƒ
â”ƒ  â”ƒ  â€¢ ĞŸÑ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ·Ğ°ÑĞ²ĞºĞ¸ Ğ¾Ñ‚ Sales Bot                      â”ƒ   â”ƒ
â”ƒ  â”ƒ  â€¢ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ PostgreSQL schema                           â”ƒ   â”ƒ
â”ƒ  â”ƒ  â€¢ Ğ’Ñ‹Ğ´ĞµĞ»ÑĞµÑ‚ Redis DB (0-127)                          â”ƒ   â”ƒ
â”ƒ  â”ƒ  â€¢ Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Docker ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ Ñ‡ĞµÑ€ĞµĞ· SDK              â”ƒ   â”ƒ
â”ƒ  â”ƒ  â€¢ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ±Ğ¾Ñ‚Ğ¾Ğ²                            â”ƒ   â”ƒ
â”ƒ  â”ƒ  â€¢ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ rollback Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ…              â”ƒ   â”ƒ
â”ƒ  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›   â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                            â†“ Docker Socket
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                    DATA PLANE                               â”ƒ
â”ƒ  â”â”â”â”â”â”â”â”â”â”â”â”“  â”â”â”â”â”â”â”â”â”â”â”â”“  â”â”â”â”â”â”â”â”â”â”â”â”“  â”â”â”â”â”â”â”â”â”â”â”â”“   â”ƒ
â”ƒ  â”ƒClient 1  â”ƒ  â”ƒClient 2  â”ƒ  â”ƒClient 3  â”ƒ  â”ƒClient N  â”ƒ   â”ƒ
â”ƒ  â”ƒBot       â”ƒ  â”ƒBot       â”ƒ  â”ƒBot       â”ƒ  â”ƒBot       â”ƒ   â”ƒ
â”ƒ  â”ƒContainer â”ƒ  â”ƒContainer â”ƒ  â”ƒContainer â”ƒ  â”ƒContainer â”ƒ   â”ƒ
â”ƒ  â”—â”â”â”â”â”â”â”â”â”â”â”›  â”—â”â”â”â”â”â”â”â”â”â”â”›  â”—â”â”â”â”â”â”â”â”â”â”â”›  â”—â”â”â”â”â”â”â”â”â”â”â”›   â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
```

---

## âœ¨ ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°

### âœ… **ĞĞ²Ñ‚Ğ¾Ğ½Ğ¾Ğ¼Ğ½Ğ¾ÑÑ‚ÑŒ**
- Master Bot ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ±Ğ¾Ñ‚Ğ¾Ğ² Ğ±ĞµĞ· Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²
- ĞĞµÑ‚ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ Ğ¾Ñ‚ Ñ…Ğ¾ÑÑ‚Ğ°
- Ğ’ÑÑ‘ Ğ² Docker - Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹

### ğŸ”’ **Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ**
- ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· PostgreSQL schemas
- Redis key prefixes Ğ´Ğ»Ñ FSM states
- ĞÑ‚Ğ¾Ğ¼Ğ°Ñ€Ğ½Ğ¾Ğµ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²

### ğŸ”„ **Rollback Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ…**
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ° Ğ¿Ñ€Ğ¸ ÑĞ±Ğ¾ÑÑ…
- Redis DB Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´Ğ°ĞµÑ‚ÑÑ
- ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ ÑƒĞ´Ğ°Ğ»ÑÑÑ‚ÑÑ
- Ğ—Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ² Ğ‘Ğ” Ğ¾Ñ‚ĞºĞ°Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ

### ğŸ“ˆ **ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ**
- Ğ”Ğ¾ 128 ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ² Ğ½Ğ° Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Redis
- ĞĞµĞ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ğ¾Ğµ ĞºĞ¾Ğ»-Ğ²Ğ¾ schemas Ğ² PostgreSQL
- ĞĞ±Ñ‰Ğ°Ñ ÑĞµÑ‚ÑŒ Docker Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ±Ğ¾Ñ‚Ğ¾Ğ²

---

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### 1. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

```bash
# ĞŸĞµÑ€ĞµÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑĞ¼Ğ¸
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

### 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Docker socket

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ, Ñ‡Ñ‚Ğ¾ Master Bot Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Docker
docker exec -it booking-bot-master python -c "import docker; print(docker.from_env().version())"

# Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ²Ñ‹Ğ²ĞµÑÑ‚Ğ¸ Ğ²ĞµÑ€ÑĞ¸Ñ Docker
```

### 3. Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Master Bot

```python
# master_bot/master_bot.py
from automation.docker_deploy_manager import DockerDeployManager

# Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
deploy_manager = DockerDeployManager()

# Ğ¥ÑĞ½Ğ´Ğ»ĞµÑ€ Ğ´Ğ»Ñ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ
@router.message(F.text == "ğŸš€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ±Ğ¾Ñ‚Ğ°")
async def deploy_new_bot(message: Message, state: FSMContext):
    # Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· FSM state
    data = await state.get_data()
    
    await message.answer("âŒ› Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°Ñ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹...")
    
    # Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹!
    result = await deploy_manager.deploy_client(
        bot_token=data['bot_token'],
        admin_telegram_id=data['admin_id'],
        company_name=data['company_name'],
        subscription_days=30
    )
    
    if result['success']:
        await message.answer(
            f"âœ… **Ğ‘Ğ¾Ñ‚ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ñ€Ğ°Ğ·Ğ²Ñ‘Ñ€Ğ½ÑƒÑ‚!**\n\n"
            f"ğŸª ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ: {result['company_name']}\n"
            f"ğŸ†” Client ID: `{result['client_id']}`\n"
            f"ğŸ“Š Redis DB: {result['redis_db']}\n"
            f"ğŸ³ Container: `{result['container_name']}`\n\n"
            f"âœ… Ğ‘Ğ¾Ñ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ 24/7",
            parse_mode="Markdown"
        )
    else:
        await message.answer(
            f"âŒ **ĞÑˆĞ¸Ğ±ĞºĞ° Ğ´ĞµĞ¿Ğ»Ğ¾Ñ**\n\n"
            f"âŒ {result['error']}",
            parse_mode="Markdown"
        )
```

---

## ğŸ“š API Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

### `DockerDeployManager`

#### `__init__(database_url, schema, docker_socket, network_name)`

Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ°.

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `database_url` (str): PostgreSQL connection string
- `schema` (str): Schema Ğ´Ğ»Ñ master_bot (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ `"master_bot"`)
- `docker_socket` (str): ĞŸÑƒÑ‚ÑŒ Ğº Docker socket (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ `"unix://var/run/docker.sock"`)
- `network_name` (str): Docker network (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ `"booking-network"`)

---

#### `async deploy_client(bot_token, admin_telegram_id, company_name, subscription_days=30, bot_username=None)`

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¾Ğ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ°.

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `bot_token` (str): Telegram Bot API token
- `admin_telegram_id` (int): Telegram ID Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°
- `company_name` (str): ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
- `subscription_days` (int): ĞšĞ¾Ğ»-Ğ²Ğ¾ Ğ´Ğ½ĞµĞ¹ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸
- `bot_username` (str, optional): Username Ğ±Ğ¾Ñ‚Ğ°

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:**
```python
{
    'success': True,
    'client_id': 'abc12345-...',
    'container_name': 'booking-client-abc12345',
    'redis_db': 5,
    'schema': 'client_abc12345',
    'company_name': 'Ğ¡Ğ°Ğ»Ğ¾Ğ½ ĞºÑ€Ğ°ÑĞ¾Ñ‚Ñ‹',
    'admin_telegram_id': 123456789
}
```

**ĞŸÑ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ:**
```python
{
    'success': False,
    'error': 'Container failed to start',
    'company_name': 'Ğ¡Ğ°Ğ»Ğ¾Ğ½ ĞºÑ€Ğ°ÑĞ¾Ñ‚Ñ‹'
}
```

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**
- ĞÑ‚Ğ¾Ğ¼Ğ°Ñ€Ğ½Ğ¾Ğµ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Redis DB
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ PostgreSQL schema
- Rollback Ğ¿Ñ€Ğ¸ Ğ»ÑĞ±Ğ¾Ğ¹ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° health check (30 ÑĞµĞºÑƒĞ½Ğ´)

---

#### `stop_client(client_id)`

ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¾Ğ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ°.

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `client_id` (str): UUID ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:**
- `True` ĞµÑĞ»Ğ¸ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾
- `False` Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ

---

#### `restart_client(client_id)`

ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¾Ğ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ°.

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `client_id` (str): UUID ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:**
- `True` ĞµÑĞ»Ğ¸ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾
- `False` Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ

---

#### `delete_client(client_id)`

ĞŸĞ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° (ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ + Ğ‘Ğ”).

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `client_id` (str): UUID ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:**
- `True` ĞµÑĞ»Ğ¸ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾
- `False` Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**
- ĞÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´Ğ°ĞµÑ‚ Redis DB
- Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ audit log Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ

---

#### `get_container_stats(client_id)`

ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°.

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `client_id` (str): UUID ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:**
```python
{
    'status': 'running',
    'cpu_usage': {...},
    'memory_usage': {...},
    'network': {...}
}
```

---

## ğŸ” ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ²ÑĞµÑ… ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¸Ñ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²

```bash
docker ps --filter "label=managed_by=master_bot"
```

### Ğ›Ğ¾Ğ³Ğ¸ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¾Ğ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ°

```bash
docker logs booking-client-abc12345 -f
```

### Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²

```bash
docker stats booking-client-abc12345
```

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° health check

```bash
docker inspect booking-client-abc12345 --format='{{json .State.Health}}'
```

---

## âš ï¸ Troubleshooting

### ĞÑˆĞ¸Ğ±ĞºĞ°: "Permission denied" Ğ¿Ñ€Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğµ Ğº Docker socket

**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** Master Bot Ğ½Ğµ Ğ¸Ğ¼ĞµĞµÑ‚ Ğ¿Ñ€Ğ°Ğ² Ğ½Ğ° Docker socket.

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
```bash
# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ½Ğ° Ñ…Ğ¾ÑÑ‚Ğµ
sudo chmod 666 /var/run/docker.sock

# Ğ˜Ğ›Ğ˜ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ user Ğ² Ğ³Ñ€ÑƒĞ¿Ğ¿Ñƒ docker
sudo usermod -aG docker $USER
```

---

### ĞÑˆĞ¸Ğ±ĞºĞ°: "All Redis DB slots are occupied"

**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** Ğ’ÑĞµ 128 Redis DB Ğ·Ğ°Ğ½ÑÑ‚Ñ‹.

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
1. Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ½ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²
2. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Redis Ğ¸Ğ½ÑÑ‚Ğ°Ğ½ÑĞ¾Ğ²

---

### ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸:**
```bash
docker logs booking-client-abc12345
```

**Ğ§Ğ°ÑÑ‚Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñ‹:**
1. ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ bot_token
2. PostgreSQL Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½
3. Redis Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½
4. Schema Ğ½Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ°

---

## ğŸ”’ Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Docker Socket Security

**Ğ Ğ¸ÑĞº:** ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ¾Ğ¼ Ğº Docker socket Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ²ÑĞµĞ¼Ğ¸ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°Ğ¼Ğ¸.

**Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ°:**
1. Master Bot Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ğ½Ğ°Ğ´Ñ‘Ğ¶Ğ½Ğ¾ Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ñ‘Ğ½
2. ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ ADMIN_IDS Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ¾Ğ²ĞµÑ€ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸
3. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ audit logging
4. Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾Ğµ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹

### PostgreSQL Security

- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ğ¸
- ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ÑŒÑ‚Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº 5432 Ğ¿Ğ¾Ñ€Ñ‚Ñƒ
- Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ğ±ÑĞºĞ°Ğ¿Ñ‹

---

## ğŸ“Š ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ

### Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼

| ĞšĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ² | CPU | RAM | Ğ”Ğ¸ÑĞº |
|----------|-----|-----|------|
| 1-10     | 2   | 4GB | 40GB |
| 10-50    | 4   | 8GB | 100GB|
| 50-100   | 8   | 16GB| 200GB|
| 100+     | 16  | 32GB| 500GB|

### ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

```yaml
# docker-compose.yml - Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ² Ğ´Ğ»Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²
services:
  client-bot:
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 512M
        reservations:
          cpus: '0.25'
          memory: 256M
```

---

## ğŸš€ Production Checklist

- [ ] Master Bot Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½ Ñ Docker socket
- [ ] PostgreSQL Ğ±ÑĞºĞ°Ğ¿Ñ‹ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹
- [ ] Redis persistence Ğ²ĞºĞ»ÑÑ‡Ñ‘Ğ½ (AOF)
- [ ] Monitoring Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ (Prometheus/Grafana)
- [ ] Audit logging Ğ²ĞºĞ»ÑÑ‡Ñ‘Ğ½
- [ ] Rate limiting Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½
- [ ] Health checks Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚
- [ ] ĞĞ»ĞµÑ€Ñ‚Ñ‹ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹

---

## ğŸ‰ Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ

Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Master Bot Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¸Ñ… Ğ±Ğ¾Ñ‚Ğ¾Ğ² **Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ°Ğ²Ñ‚Ğ¾Ğ½Ğ¾Ğ¼Ğ½Ğ¾**!

âœ… ĞĞµÑ‚ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹  
âœ… ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ rollback  
âœ… Real-time Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³  
âœ… ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ  

**Ready for production!** ğŸš€
